% preamble.tex - Shared package configuration and settings
% This file contains all LaTeX package imports and configuration

%% Document Class already specified in main file

%% Language Support
\usepackage[finnish]{babel}          % Finnish hyphenation and translations
\usepackage[utf8]{inputenc}          % UTF-8 input encoding
\usepackage[T1]{fontenc}             % T1 font encoding for Finnish

%% Fonts - Arial (using Helvetica as Arial substitute)
\usepackage{helvet}                  % Helvetica font family (Arial substitute)
\renewcommand{\familydefault}{\sfdefault}  % Use sans-serif as default

%% Color Management
\usepackage[cmyk]{xcolor}            % CMYK color space
\definecolor{TextBlack}{cmyk}{0,0,0,1}  % CMYK Black

%% Graphics and Images
\usepackage{graphicx}                % Include graphics
\graphicspath{{processed/images/}{../assets/logos/}{../assets/icons/}}  % Image paths
\usepackage{float}                   % Better float control [H] option
\usepackage{wrapfig}                 % Text wrapping around figures

%% Multi-column Layout
\usepackage{multicol}                % Multi-column text
\setlength{\columnsep}{14.17pt}      % Column gap (~5mm)

%% PDF/X Compliance for Print Production
% Note: pdfx package must be loaded in main document before \documentclass
% It requires .xmpdata file for metadata

%% Page Numbering and Headers/Footers
\usepackage{fancyhdr}                % Custom headers and footers
\pagestyle{fancy}
\fancyhf{}                           % Clear default settings

% Header - add Sissybar logo
\fancyhead[C]{%
    \includegraphics[height=8mm]{Sissybar-teksti.tif}%
}

% Footer - page number
\fancyfoot[C]{\thepage}

% Remove header/footer lines
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

%% Paragraph and Text Settings
\setlength{\parindent}{0pt}          % No paragraph indentation
\setlength{\parskip}{6pt}            % Space between paragraphs

% Define paragraph styles matching Scribus
\newcommand{\leipis}[1]{%            % Body text style
    \fontsize{10pt}{12pt}\selectfont%
    \justifying%
    #1%
}

\newcommand{\kuvateksti}[1]{%        % Image caption style
    \fontsize{10pt}{12pt}\selectfont%
    \textit{#1}%
}

%% Justified text
\usepackage{ragged2e}                % Better justification

%% Hyperref (but disabled for PDF/X compliance)
% PDF/X doesn't allow hyperlinks
\usepackage{hyperref}
\hypersetup{
    draft=true,                      % Disable all hyperlinks for PDF/X
    colorlinks=false,
    pdfborder={0 0 0},
}

%% Adjustbox for image sizing
\usepackage{adjustbox}

%% Microtype for better typography
\usepackage{microtype}

%% Caption formatting
\usepackage{caption}
\captionsetup{
    font={small,it},
    justification=justified,
    singlelinecheck=false,
    labelsep=space,
}

%% Line spacing
\usepackage{setspace}
\setstretch{1.2}                     % Slightly increased line spacing

%% Section formatting
\usepackage{titlesec}

% Section titles - Arial Bold, larger size
\titleformat{\section}
    {\normalfont\Large\bfseries}     % Format
    {}                                % Label
    {0pt}                            % Sep
    {}                               % Before code

\titleformat{\subsection}
    {\normalfont\large\bfseries}
    {}
    {0pt}
    {}

% Reduce spacing around sections
\titlespacing*{\section}{0pt}{12pt plus 4pt minus 2pt}{6pt plus 2pt minus 2pt}
\titlespacing*{\subsection}{0pt}{10pt plus 3pt minus 2pt}{4pt plus 2pt minus 2pt}

%% Useful commands

% Insert icon with text
\newcommand{\icon}[1]{%
    \raisebox{-0.2\height}{%
        \includegraphics[height=1em]{#1}%
    }%
}

% Two column figure that spans both columns
\newcommand{\twocolumnfig}[3][1.0]{%
    % #1 = width (optional, default 1.0\textwidth)
    % #2 = image filename
    % #3 = caption
    \begin{figure*}[ht]
        \centering
        \includegraphics[width=#1\textwidth]{#2}
        \caption{\kuvateksti{#3}}
    \end{figure*}
}

% Single column figure
\newcommand{\onefig}[3][0.9]{%
    % #1 = width (optional, default 0.9\columnwidth)
    % #2 = image filename
    % #3 = caption
    \begin{figure}[H]
        \centering
        \includegraphics[width=#1\columnwidth]{#2}
        \caption{\kuvateksti{#3}}
    \end{figure}
}

%% Fix for Finnish language
\addto\captionsfinnish{%
    \renewcommand{\figurename}{Kuva}%
    \renewcommand{\tablename}{Taulukko}%
}
